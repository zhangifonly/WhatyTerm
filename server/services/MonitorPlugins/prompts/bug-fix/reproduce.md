# Bug 修复 - 问题复现阶段

## 阶段目标
稳定复现问题，收集完整的错误信息，为后续分析提供可靠依据。

## 复现步骤模板

```markdown
## Bug 复现报告

### 环境信息
- 操作系统: [Windows/macOS/Linux] [版本]
- 运行时: [Node.js/Python/Java] [版本]
- 浏览器: [Chrome/Firefox/Safari] [版本]（如适用）
- 项目版本/分支: [版本号或 commit hash]
- 相关依赖版本: [列出关键依赖]

### 复现步骤
1. [具体操作步骤1]
2. [具体操作步骤2]
3. [具体操作步骤3]
...

### 预期行为
[描述正常情况下应该发生什么]

### 实际行为
[描述实际发生了什么，包括错误信息]

### 复现频率
- [ ] 每次都能复现 (100%)
- [ ] 高频复现 (>50%)
- [ ] 偶发 (10-50%)
- [ ] 罕见 (<10%)
- [ ] 特定条件下复现（描述条件）
```

## 信息收集清单

### 必须收集
- [ ] 完整的错误堆栈（不要截断）
- [ ] 控制台/终端日志
- [ ] 触发错误的具体操作
- [ ] 错误发生的时间点

### 建议收集
- [ ] 网络请求记录（Network tab）
- [ ] 相关代码片段
- [ ] 截图或录屏
- [ ] 系统资源使用情况（CPU/内存）

### 环境相关
- [ ] 环境变量配置
- [ ] 配置文件内容
- [ ] 数据库状态（如适用）
- [ ] 第三方服务状态

## 调试技巧

### 日志追踪
```javascript
// 在关键位置添加日志
console.log('[DEBUG] 函数入口:', { param1, param2 });
console.log('[DEBUG] 中间状态:', { state });
console.log('[DEBUG] 函数出口:', { result });

// 使用 console.trace() 查看调用栈
console.trace('调用追踪');

// 使用 console.time() 测量耗时
console.time('操作耗时');
// ... 操作
console.timeEnd('操作耗时');
```

### 浏览器调试
1. **断点调试**: F12 → Sources → 点击行号设置断点
2. **条件断点**: 右键行号 → Add conditional breakpoint
3. **DOM 断点**: Elements → 右键元素 → Break on
4. **网络请求**: Network → 查看请求/响应详情

### Node.js 调试
```bash
# 使用 inspect 模式
node --inspect app.js

# 使用 ndb（推荐）
npx ndb app.js

# 使用 VS Code 调试
# 配置 launch.json 后按 F5
```

## 复现失败时的处理

如果无法稳定复现：
1. **扩大测试范围** - 尝试不同的输入、环境、时机
2. **检查竞态条件** - 问题可能与时序相关
3. **检查资源状态** - 内存、连接池、文件句柄
4. **查看历史日志** - 寻找问题首次出现的时间点
5. **对比正常环境** - 找出差异点

## 检查清单

- [ ] 是否能稳定复现（每次都能触发）
- [ ] 是否记录了详细的复现步骤
- [ ] 是否收集了完整的错误信息
- [ ] 是否确定了触发条件和环境
- [ ] 是否排除了环境配置问题
