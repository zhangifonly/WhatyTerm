# 重构优化 - 效果验证阶段

## 阶段目标
验证重构是否达到预期目标，生成重构报告。

## 验证指标

### 代码质量指标
| 指标 | 重构前 | 重构后 | 目标 |
|------|--------|--------|------|
| 圈复杂度 | - | - | < 10 |
| 代码行数 | - | - | 减少 |
| 重复代码 | - | - | < 3% |
| 测试覆盖率 | - | - | > 80% |

### 性能指标
| 指标 | 重构前 | 重构后 | 变化 |
|------|--------|--------|------|
| 响应时间 | - | - | - |
| 内存使用 | - | - | - |
| CPU 使用 | - | - | - |

## 对比分析

### 代码对比
```bash
# 查看代码变化统计
git diff --stat main

# 查看具体变化
git diff main -- src/
```

### 复杂度对比
```bash
# 使用 complexity-report
cr src/ --format json > complexity-after.json

# 对比前后
diff complexity-before.json complexity-after.json
```

## 重构报告模板

```markdown
# 重构报告

## 概述
- 重构目标：
- 重构范围：
- 重构时间：

## 变更内容
- 修改文件数：
- 新增代码行：
- 删除代码行：

## 质量改进
- 复杂度变化：
- 重复代码变化：
- 测试覆盖率变化：

## 性能影响
- 响应时间变化：
- 资源使用变化：

## 遗留问题
- 待处理项：
- 后续计划：
```

## 验证清单

- [ ] 代码质量指标改善
- [ ] 性能无明显下降
- [ ] 所有测试通过
- [ ] 文档已更新
- [ ] 团队已知晓变更
