# WebTmux - AI é©±åŠ¨çš„è‡ªåŠ¨åŒ–ç»ˆç«¯ç®¡ç†ç³»ç»Ÿ

## ç³»ç»Ÿæ¦‚è¿°

ä¸€ä¸ªåŸºäº Web çš„ tmux ä¼šè¯ç®¡ç†ç³»ç»Ÿï¼Œæ¯ä¸ªç»ˆç«¯çª—å£ç”± AI åå°ç›‘æ§ï¼Œæ ¹æ®é¢„è®¾çš„ç›®æ ‡å’Œæç¤ºè¯è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œæ‰€æœ‰è¾“å…¥è¾“å‡ºå®Œæ•´è®°å½•å¹¶å¯é€šè¿‡ç½‘é¡µæŸ¥çœ‹åˆ†äº«ã€‚

## æ ¸å¿ƒéœ€æ±‚

1. **Web ç»ˆç«¯ç•Œé¢** - æµè§ˆå™¨ä¸­æ˜¾ç¤ºæ‰€æœ‰è¿è¡Œçš„ tmux ä¼šè¯
2. **AI è‡ªåŠ¨åŒ–** - æ¯ä¸ªä¼šè¯çª—å£å¯è®¾ç½®ç›®æ ‡å’Œæç¤ºè¯ï¼ŒAI è‡ªåŠ¨å†³ç­–å’Œæ‰§è¡Œ
3. **å®Œæ•´è®°å½•** - æ‰€æœ‰è¾“å…¥è¾“å‡ºå¸¦æ—¶é—´æˆ³è®°å½•åˆ°æ•°æ®åº“
4. **å†å²æŸ¥çœ‹** - ç½‘é¡µæŸ¥çœ‹ä»»æ„ä¼šè¯çš„å®Œæ•´å†å²
5. **åˆ†äº«åŠŸèƒ½** - ç”Ÿæˆåˆ†äº«é“¾æ¥ï¼Œä»–äººå¯æŸ¥çœ‹ä¼šè¯è®°å½•

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Web å‰ç«¯ (React)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¼šè¯åˆ—è¡¨    â”‚  â”‚ ç»ˆç«¯è§†å›¾    â”‚  â”‚ å†å²è®°å½•æŸ¥çœ‹å™¨          â”‚  â”‚
â”‚  â”‚ - æ‰€æœ‰ä¼šè¯  â”‚  â”‚ - xterm.js  â”‚  â”‚ - æ—¶é—´çº¿è§†å›¾            â”‚  â”‚
â”‚  â”‚ - çŠ¶æ€æŒ‡ç¤º  â”‚  â”‚ - å®æ—¶è¾“å‡º  â”‚  â”‚ - æœç´¢è¿‡æ»¤              â”‚  â”‚
â”‚  â”‚ - ç›®æ ‡é…ç½®  â”‚  â”‚ - æ‰‹åŠ¨è¾“å…¥  â”‚  â”‚ - åˆ†äº«é“¾æ¥              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ WebSocket
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Node.js åç«¯æœåŠ¡                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                   WebSocket Server                          â”‚â”‚
â”‚  â”‚  - å®¢æˆ·ç«¯è¿æ¥ç®¡ç†                                            â”‚â”‚
â”‚  â”‚  - ç»ˆç«¯è¾“å…¥è¾“å‡ºä¸­ç»§                                          â”‚â”‚
â”‚  â”‚  - å®æ—¶çŠ¶æ€æ¨é€                                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¼šè¯ç®¡ç†å™¨    â”‚  â”‚ å†å²è®°å½•å™¨    â”‚  â”‚ AI å†³ç­–å¼•æ“         â”‚  â”‚
â”‚  â”‚ SessionMgr   â”‚  â”‚ HistoryLogger â”‚  â”‚ AIDecisionEngine   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚               â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚ - åˆ›å»ºä¼šè¯   â”‚  â”‚ - è®°å½•è¾“å…¥    â”‚  â”‚ - åˆ†æç»ˆç«¯è¾“å‡º      â”‚  â”‚
â”‚  â”‚ - é™„åŠ ä¼šè¯   â”‚  â”‚ - è®°å½•è¾“å‡º    â”‚  â”‚ - æ ¹æ®ç›®æ ‡å†³ç­–      â”‚  â”‚
â”‚  â”‚ - åˆ—å‡ºä¼šè¯   â”‚  â”‚ - æ—¶é—´æˆ³      â”‚  â”‚ - ç”Ÿæˆä¸‹ä¸€æ¡å‘½ä»¤    â”‚  â”‚
â”‚  â”‚ - ç›®æ ‡é…ç½®   â”‚  â”‚ - æŒä¹…åŒ–å­˜å‚¨  â”‚  â”‚ - è°ƒç”¨ Claude API   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                   â”‚                    â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    PTY ç®¡ç†å™¨ (node-pty)                     â”‚â”‚
â”‚  â”‚  - æ¯ä¸ªä¼šè¯ä¸€ä¸ª PTY                                          â”‚â”‚
â”‚  â”‚  - è¾“å…¥å†™å…¥ / è¾“å‡ºè¯»å–                                       â”‚â”‚
â”‚  â”‚  - ç»ˆç«¯å°ºå¯¸è°ƒæ•´                                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç³»ç»Ÿå±‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ tmux Server     â”‚  â”‚ SQLite/PostgreSQLâ”‚  â”‚ Claude API     â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                  â”‚  â”‚                 â”‚  â”‚
â”‚  â”‚ - Session ç®¡ç†  â”‚  â”‚ - sessions è¡¨    â”‚  â”‚ - åˆ†æä¸Šä¸‹æ–‡    â”‚  â”‚
â”‚  â”‚ - Window ç®¡ç†   â”‚  â”‚ - history è¡¨     â”‚  â”‚ - ç”Ÿæˆå‘½ä»¤      â”‚  â”‚
â”‚  â”‚ - Pane ç®¡ç†     â”‚  â”‚ - goals è¡¨       â”‚  â”‚ - æµå¼å“åº”      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æ¨¡å‹

### Sessionï¼ˆä¼šè¯ï¼‰

```typescript
interface Session {
  id: string;                    // å”¯ä¸€æ ‡è¯†ç¬¦
  name: string;                  // ä¼šè¯åç§°
  tmuxSessionName: string;       // tmux ä¼šè¯å

  // AI é…ç½®
  goal: string;                  // ä¼šè¯ç›®æ ‡ï¼ˆå¦‚ï¼š"éƒ¨ç½² Node.js åº”ç”¨åˆ°æœåŠ¡å™¨"ï¼‰
  systemPrompt: string;          // AI ç³»ç»Ÿæç¤ºè¯
  aiEnabled: boolean;            // æ˜¯å¦å¯ç”¨ AI è‡ªåŠ¨åŒ–
  aiModel: string;               // ä½¿ç”¨çš„ AI æ¨¡å‹

  // çŠ¶æ€
  status: 'running' | 'paused' | 'completed' | 'error';
  createdAt: Date;
  updatedAt: Date;

  // åˆ†äº«
  shareToken?: string;           // åˆ†äº«ä»¤ç‰Œ
  isPublic: boolean;             // æ˜¯å¦å…¬å¼€
}
```

### HistoryEntryï¼ˆå†å²è®°å½•ï¼‰

```typescript
interface HistoryEntry {
  id: string;
  sessionId: string;

  type: 'input' | 'output' | 'ai_decision' | 'error' | 'system';
  content: string;               // å®é™…å†…å®¹

  // AI ç›¸å…³
  aiGenerated: boolean;          // æ˜¯å¦ç”± AI ç”Ÿæˆ
  aiReasoning?: string;          // AI çš„å†³ç­–ç†ç”±

  timestamp: Date;

  // å…ƒæ•°æ®
  metadata?: {
    exitCode?: number;           // å‘½ä»¤é€€å‡ºç 
    duration?: number;           // å‘½ä»¤æ‰§è¡Œæ—¶é•¿
    promptTokens?: number;       // AI æ¶ˆè€—çš„ token
  };
}
```

### Goalï¼ˆç›®æ ‡é…ç½®ï¼‰

```typescript
interface Goal {
  id: string;
  sessionId: string;

  description: string;           // ç›®æ ‡æè¿°
  systemPrompt: string;          // ç³»ç»Ÿæç¤ºè¯

  // çº¦æŸ
  maxCommands?: number;          // æœ€å¤§å‘½ä»¤æ•°
  timeout?: number;              // è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  allowedCommands?: string[];    // å…è®¸çš„å‘½ä»¤ç™½åå•
  forbiddenCommands?: string[];  // ç¦æ­¢çš„å‘½ä»¤é»‘åå•

  // å®Œæˆæ¡ä»¶
  successPattern?: string;       // æˆåŠŸçš„è¾“å‡ºæ¨¡å¼ï¼ˆæ­£åˆ™ï¼‰
  failurePattern?: string;       // å¤±è´¥çš„è¾“å‡ºæ¨¡å¼ï¼ˆæ­£åˆ™ï¼‰

  status: 'active' | 'completed' | 'failed' | 'cancelled';
  createdAt: Date;
  completedAt?: Date;
}
```

## AI å·¥ä½œæ¨¡å¼

### ä¸¤ç§æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AI å·¥ä½œæ¨¡å¼                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”˜ å»ºè®®æ¨¡å¼ (Suggest Mode) - é»˜è®¤                       â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  AI åˆ†æç»ˆç«¯è¾“å‡ºåï¼Œæ˜¾ç¤ºå»ºè®®å‘½ä»¤                          â”‚   â”‚
â”‚  â”‚  ç”¨æˆ·ç‚¹å‡»ã€Œæ‰§è¡Œã€æŒ‰é’®åæ‰ä¼šè¾“å…¥                           â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ’¡ AI å»ºè®®                                         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ npm install                                        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ ç†ç”±: æ£€æµ‹åˆ° package.jsonï¼Œéœ€è¦å…ˆå®‰è£…ä¾èµ–           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ [æ‰§è¡Œ â–¶] [ç¼–è¾‘] [å¿½ç•¥]                             â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”µ è‡ªåŠ¨æ¨¡å¼ (Auto Mode) - éœ€æ‰‹åŠ¨å¼€å¯                    â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  AI åˆ†æåç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæ— éœ€ç¡®è®¤                          â”‚   â”‚
â”‚  â”‚  é€‚åˆä¿¡ä»»åº¦é«˜çš„é‡å¤æ€§ä»»åŠ¡                                 â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  âš ï¸ å®‰å…¨æç¤º: å±é™©å‘½ä»¤ä»ä¼šæš‚åœå¹¶è¯·æ±‚ç¡®è®¤                  â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [â—‹ å…³é—­] â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€ [â— å¼€å¯]                          â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å¼åˆ‡æ¢é€»è¾‘

```typescript
interface AIMode {
  mode: 'suggest' | 'auto';       // å½“å‰æ¨¡å¼
  autoApprove: boolean;           // è‡ªåŠ¨æ¨¡å¼å¼€å…³

  // å®‰å…¨è®¾ç½®
  dangerousCommandsRequireApproval: boolean;  // å±é™©å‘½ä»¤ä»éœ€ç¡®è®¤
  maxAutoCommands: number;        // è‡ªåŠ¨æ¨¡å¼æœ€å¤§è¿ç»­å‘½ä»¤æ•°ï¼ˆé˜²æ­¢å¤±æ§ï¼‰
}

// å±é™©å‘½ä»¤åˆ—è¡¨ï¼ˆè‡ªåŠ¨æ¨¡å¼ä¸‹ä»éœ€ç¡®è®¤ï¼‰
const DANGEROUS_PATTERNS = [
  /^rm\s+(-rf?|--recursive)/,     // åˆ é™¤æ–‡ä»¶
  /^sudo\s+/,                      // sudo å‘½ä»¤
  /^chmod\s+777/,                  // å±é™©æƒé™
  /^dd\s+/,                        // ç£ç›˜æ“ä½œ
  />\s*\/dev\//,                   // å†™å…¥è®¾å¤‡
  /^reboot|shutdown|halt/,         // ç³»ç»Ÿæ“ä½œ
  /^kill\s+-9/,                    // å¼ºåˆ¶ç»ˆæ­¢
];
```

### UI äº¤äº’æµç¨‹

```
ç”¨æˆ·æ‰“å¼€ä¼šè¯
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI åˆ†æç»ˆç«¯çŠ¶æ€  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
      â”‚                                          â”‚
      â–¼                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚ ç”Ÿæˆå»ºè®®å‘½ä»¤    â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
      â”‚                                          â”‚
      â–¼                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ æ£€æŸ¥æ¨¡å¼                                 â”‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚                                         â”‚      â”‚
â”‚  è‡ªåŠ¨æ¨¡å¼ ON?                           â”‚      â”‚
â”‚      â”‚                                  â”‚      â”‚
â”‚      â”œâ”€â”€ æ˜¯ â”€â”€â–º æ˜¯å±é™©å‘½ä»¤?             â”‚      â”‚
â”‚      â”‚              â”‚                   â”‚      â”‚
â”‚      â”‚              â”œâ”€â”€ æ˜¯ â”€â”€â–º æ˜¾ç¤ºå»ºè®®ï¼Œç­‰å¾…ç¡®è®¤
â”‚      â”‚              â”‚                   â”‚      â”‚
â”‚      â”‚              â””â”€â”€ å¦ â”€â”€â–º ç›´æ¥æ‰§è¡Œ â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                                  â”‚      â”‚
â”‚      â””â”€â”€ å¦ â”€â”€â–º æ˜¾ç¤ºå»ºè®®å¡ç‰‡            â”‚      â”‚
â”‚                     â”‚                   â”‚      â”‚
â”‚                     â–¼                   â”‚      â”‚
â”‚              ç­‰å¾…ç”¨æˆ·æ“ä½œ               â”‚      â”‚
â”‚                     â”‚                   â”‚      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚      â”‚
â”‚           â–¼        â–¼        â–¼          â”‚      â”‚
â”‚        [æ‰§è¡Œ]   [ç¼–è¾‘]   [å¿½ç•¥]        â”‚      â”‚
â”‚           â”‚        â”‚        â”‚          â”‚      â”‚
â”‚           â”‚        â”‚        â””â”€â”€â–º ç­‰å¾…ä¸‹ä¸€ä¸ªè¾“å‡º
â”‚           â”‚        â”‚                   â”‚      â”‚
â”‚           â”‚        â””â”€â”€â–º æ‰“å¼€ç¼–è¾‘æ¡†     â”‚      â”‚
â”‚           â”‚              ç”¨æˆ·ä¿®æ”¹åæ‰§è¡Œ â”‚      â”‚
â”‚           â”‚                            â”‚      â”‚
â”‚           â””â”€â”€â–º æ‰§è¡Œå‘½ä»¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## AI å†³ç­–å¼•æ“

### å†³ç­–æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI å†³ç­–å¾ªç¯                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ”¶é›†ä¸Šä¸‹æ–‡                                                â”‚
â”‚    - ä¼šè¯ç›®æ ‡å’Œç³»ç»Ÿæç¤ºè¯                                    â”‚
â”‚    - æœ€è¿‘ N æ¡å†å²è®°å½•ï¼ˆè¾“å…¥/è¾“å‡ºï¼‰                          â”‚
â”‚    - å½“å‰ç»ˆç«¯çŠ¶æ€ï¼ˆå‘½ä»¤æ˜¯å¦æ‰§è¡Œå®Œæˆï¼‰                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. æ„å»º Prompt                                              â”‚
â”‚    - System: ç³»ç»Ÿæç¤ºè¯ + å®‰å…¨çº¦æŸ                          â”‚
â”‚    - User: ç›®æ ‡ + å†å²è®°å½• + å½“å‰çŠ¶æ€                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è°ƒç”¨ Claude API                                          â”‚
â”‚    - ä½¿ç”¨ tool_use æ¨¡å¼                                     â”‚
â”‚    - å·¥å…·ï¼šexecute_command, wait, ask_user, complete_goal   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ‰§è¡Œå†³ç­–                                                 â”‚
â”‚    - execute_command: å†™å…¥ PTY                              â”‚
â”‚    - wait: ç­‰å¾…è¾“å‡ºç¨³å®š                                     â”‚
â”‚    - ask_user: æš‚åœå¹¶è¯·æ±‚ç”¨æˆ·è¾“å…¥                           â”‚
â”‚    - complete_goal: æ ‡è®°ç›®æ ‡å®Œæˆ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. è®°å½•åˆ°å†å²                                               â”‚
â”‚    - è®°å½• AI å†³ç­–å’Œç†ç”±                                     â”‚
â”‚    - è®°å½•å‘½ä»¤å’Œè¾“å‡º                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        ç­‰å¾…è¾“å‡ºå®Œæˆ
                              â”‚
                              â–¼
                        å›åˆ°æ­¥éª¤ 1
```

### AI å¯ç”¨å·¥å…·

```typescript
const AI_TOOLS = [
  {
    name: 'execute_command',
    description: 'åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤',
    input_schema: {
      type: 'object',
      properties: {
        command: { type: 'string', description: 'è¦æ‰§è¡Œçš„å‘½ä»¤' },
        reasoning: { type: 'string', description: 'æ‰§è¡Œè¿™æ¡å‘½ä»¤çš„ç†ç”±' }
      },
      required: ['command', 'reasoning']
    }
  },
  {
    name: 'wait_for_output',
    description: 'ç­‰å¾…ç»ˆç«¯è¾“å‡ºç¨³å®šï¼ˆå‘½ä»¤æ‰§è¡Œå®Œæˆï¼‰',
    input_schema: {
      type: 'object',
      properties: {
        timeout: { type: 'number', description: 'æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰' }
      }
    }
  },
  {
    name: 'ask_user',
    description: 'æš‚åœè‡ªåŠ¨åŒ–ï¼Œè¯·æ±‚ç”¨æˆ·è¾“å…¥æˆ–ç¡®è®¤',
    input_schema: {
      type: 'object',
      properties: {
        question: { type: 'string', description: 'è¦é—®ç”¨æˆ·çš„é—®é¢˜' }
      },
      required: ['question']
    }
  },
  {
    name: 'complete_goal',
    description: 'æ ‡è®°å½“å‰ç›®æ ‡ä¸ºå·²å®Œæˆ',
    input_schema: {
      type: 'object',
      properties: {
        summary: { type: 'string', description: 'å®Œæˆæƒ…å†µæ€»ç»“' },
        success: { type: 'boolean', description: 'æ˜¯å¦æˆåŠŸå®Œæˆ' }
      },
      required: ['summary', 'success']
    }
  }
];
```

## Web UI è®¾è®¡

### é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WebTmux - AI Terminal Manager                    [+ æ–°å»ºä¼šè¯]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¼šè¯åˆ—è¡¨        â”‚  â”‚ ç»ˆç«¯è§†å›¾                             â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚ â— deploy-app   â”‚  â”‚ â”‚ $ npm install                   â”‚  â”‚  â”‚
â”‚  â”‚   ç›®æ ‡: éƒ¨ç½²... â”‚  â”‚ â”‚ added 123 packages              â”‚  â”‚  â”‚
â”‚  â”‚   AI: è¿è¡Œä¸­    â”‚  â”‚ â”‚ $ npm run build                 â”‚  â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚ â”‚ Building...                     â”‚  â”‚  â”‚
â”‚  â”‚ â—‹ monitor-logs â”‚  â”‚ â”‚ âœ“ Build complete                â”‚  â”‚  â”‚
â”‚  â”‚   ç›®æ ‡: ç›‘æ§... â”‚  â”‚ â”‚ $ _                             â”‚  â”‚  â”‚
â”‚  â”‚   AI: æš‚åœ      â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                                      â”‚  â”‚
â”‚  â”‚ â—‹ setup-db     â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚   ç›®æ ‡: é…ç½®... â”‚  â”‚ â”‚ AI çŠ¶æ€: æ€è€ƒä¸­...              â”‚  â”‚  â”‚
â”‚  â”‚   AI: ç­‰å¾…è¾“å…¥  â”‚  â”‚ â”‚ ä¸‹ä¸€æ­¥: å‡†å¤‡æ‰§è¡Œ npm start      â”‚  â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚ â”‚ [æš‚åœ] [è·³è¿‡] [æ‰‹åŠ¨è¾“å…¥]        â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                       â”‚                                      â”‚  â”‚
â”‚                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                       â”‚ â”‚ ğŸ’¡ AI å»ºè®®                      â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚                                 â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚  npm start                      â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚                                 â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚  ç†ç”±: æ„å»ºå®Œæˆï¼Œå¯åŠ¨åº”ç”¨        â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚                                 â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚  [æ‰§è¡Œ â–¶] [ç¼–è¾‘] [å¿½ç•¥]         â”‚  â”‚  â”‚
â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                       â”‚                                      â”‚  â”‚
â”‚                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                       â”‚ â”‚ è®¾ç½®               è‡ªåŠ¨æ¨¡å¼      â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚ ç›®æ ‡: éƒ¨ç½² Node.js [â—‹ OFF â—]    â”‚  â”‚  â”‚
â”‚                       â”‚ â”‚ [ç¼–è¾‘ç›®æ ‡] [æŸ¥çœ‹å†å²] [åˆ†äº«]     â”‚  â”‚  â”‚
â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å»ºè®®å¡ç‰‡äº¤äº’çŠ¶æ€

```
çŠ¶æ€1: æ˜¾ç¤ºå»ºè®®ï¼ˆé»˜è®¤ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ AI å»ºè®®                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  npm start                                                      â”‚
â”‚                                                                 â”‚
â”‚  ç†ç”±: æ£€æµ‹åˆ°æ„å»ºå·²å®Œæˆï¼Œä¸‹ä¸€æ­¥åº”è¯¥å¯åŠ¨æœåŠ¡                       â”‚
â”‚                                                                 â”‚
â”‚  [æ‰§è¡Œ â–¶]  [ç¼–è¾‘ âœ]  [å¿½ç•¥ âœ•]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çŠ¶æ€2: ç‚¹å‡»æ‰§è¡Œå
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ å·²æ‰§è¡Œ                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  npm start                                                      â”‚
â”‚  â³ ç­‰å¾…è¾“å‡º...                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çŠ¶æ€3: è‡ªåŠ¨æ¨¡å¼å¼€å¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– è‡ªåŠ¨æ¨¡å¼è¿è¡Œä¸­                                     [æš‚åœ â¸]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å½“å‰: npm start                                                â”‚
â”‚  çŠ¶æ€: â³ æ‰§è¡Œä¸­                                                 â”‚
â”‚  å·²è¿ç»­æ‰§è¡Œ: 3 æ¡å‘½ä»¤                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å†å²è®°å½•è§†å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¼šè¯å†å²: deploy-app                              [å¯¼å‡º] [åˆ†äº«] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­›é€‰: [å…¨éƒ¨ â–¼] [è¾“å…¥] [è¾“å‡º] [AIå†³ç­–]    æœç´¢: [_________]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  10:23:45  [ç³»ç»Ÿ] ä¼šè¯åˆ›å»ºï¼Œç›®æ ‡: éƒ¨ç½² Node.js åº”ç”¨              â”‚
â”‚                                                                 â”‚
â”‚  10:23:46  [AIå†³ç­–] é¦–å…ˆæ£€æŸ¥å½“å‰ç›®å½•                            â”‚
â”‚            ç†ç”±: éœ€è¦ç¡®è®¤é¡¹ç›®ç»“æ„                                â”‚
â”‚                                                                 â”‚
â”‚  10:23:46  [è¾“å…¥] ls -la                                        â”‚
â”‚                                                                 â”‚
â”‚  10:23:47  [è¾“å‡º] total 48                                      â”‚
â”‚            drwxr-xr-x  12 user  staff   384 Dec  7 10:20 .      â”‚
â”‚            -rw-r--r--   1 user  staff  1234 Dec  7 10:20 ...    â”‚
â”‚                                                                 â”‚
â”‚  10:23:48  [AIå†³ç­–] å‘ç° package.jsonï¼Œæ‰§è¡Œå®‰è£…                  â”‚
â”‚            ç†ç”±: é¡¹ç›®éœ€è¦å…ˆå®‰è£…ä¾èµ–                              â”‚
â”‚                                                                 â”‚
â”‚  10:23:48  [è¾“å…¥] npm install                                   â”‚
â”‚                                                                 â”‚
â”‚  10:24:15  [è¾“å‡º] added 123 packages in 27s                     â”‚
â”‚                                                                 â”‚
â”‚  ...                                                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## API è®¾è®¡

### REST API

```
# ä¼šè¯ç®¡ç†
GET    /api/sessions              # åˆ—å‡ºæ‰€æœ‰ä¼šè¯
POST   /api/sessions              # åˆ›å»ºæ–°ä¼šè¯
GET    /api/sessions/:id          # è·å–ä¼šè¯è¯¦æƒ…
PUT    /api/sessions/:id          # æ›´æ–°ä¼šè¯é…ç½®
DELETE /api/sessions/:id          # åˆ é™¤ä¼šè¯

# ä¼šè¯æ§åˆ¶
POST   /api/sessions/:id/attach   # é™„åŠ åˆ°ä¼šè¯
POST   /api/sessions/:id/detach   # åˆ†ç¦»ä¼šè¯
POST   /api/sessions/:id/ai/start # å¯åŠ¨ AI è‡ªåŠ¨åŒ–
POST   /api/sessions/:id/ai/pause # æš‚åœ AI è‡ªåŠ¨åŒ–
POST   /api/sessions/:id/ai/stop  # åœæ­¢ AI è‡ªåŠ¨åŒ–

# å†å²è®°å½•
GET    /api/sessions/:id/history  # è·å–å†å²è®°å½•
GET    /api/sessions/:id/history/export  # å¯¼å‡ºå†å²

# åˆ†äº«
POST   /api/sessions/:id/share    # ç”Ÿæˆåˆ†äº«é“¾æ¥
GET    /api/share/:token          # é€šè¿‡åˆ†äº«é“¾æ¥è®¿é—®
```

### WebSocket äº‹ä»¶

```typescript
// å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯
interface ClientEvents {
  'session:attach': { sessionId: string };
  'session:detach': { sessionId: string };
  'terminal:input': { sessionId: string; data: string };
  'terminal:resize': { sessionId: string; cols: number; rows: number };
  'ai:start': { sessionId: string };
  'ai:pause': { sessionId: string };
  'ai:approve': { sessionId: string; approved: boolean };  // æ‰¹å‡† AI æ“ä½œ
}

// æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯
interface ServerEvents {
  'terminal:output': { sessionId: string; data: string };
  'session:status': { sessionId: string; status: SessionStatus };
  'ai:thinking': { sessionId: string; message: string };
  'ai:decision': { sessionId: string; command: string; reasoning: string };
  'ai:waiting': { sessionId: string; question: string };
  'ai:completed': { sessionId: string; summary: string; success: boolean };
  'history:entry': { sessionId: string; entry: HistoryEntry };
}
```

## æŠ€æœ¯æ ˆ

### åç«¯
- **è¿è¡Œæ—¶**: Node.js 20+
- **æ¡†æ¶**: Express.js / Fastify
- **WebSocket**: Socket.IO
- **PTY**: node-pty
- **æ•°æ®åº“**: SQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§)
- **ORM**: Prisma / Drizzle
- **AI**: Anthropic Claude API (@anthropic-ai/sdk)

### å‰ç«¯
- **æ¡†æ¶**: React 18+ / Next.js
- **ç»ˆç«¯**: xterm.js + xterm-addon-fit + xterm-addon-web-links
- **çŠ¶æ€ç®¡ç†**: Zustand / Jotai
- **æ ·å¼**: Tailwind CSS
- **å®æ—¶é€šä¿¡**: Socket.IO Client

## å®‰å…¨è€ƒè™‘

1. **å‘½ä»¤è¿‡æ»¤** - å¯é…ç½®ç¦æ­¢æ‰§è¡Œçš„å±é™©å‘½ä»¤ï¼ˆrm -rf /, etc.ï¼‰
2. **èµ„æºé™åˆ¶** - é™åˆ¶æ¯ä¸ªä¼šè¯çš„ CPU/å†…å­˜ä½¿ç”¨
3. **è®¤è¯æˆæƒ** - ç”¨æˆ·ç™»å½•ï¼Œä¼šè¯æƒé™æ§åˆ¶
4. **å®¡è®¡æ—¥å¿—** - æ‰€æœ‰æ“ä½œå®Œæ•´è®°å½•
5. **åˆ†äº«æ§åˆ¶** - åˆ†äº«é“¾æ¥å¯è®¾ç½®è¿‡æœŸæ—¶é—´å’Œè®¿é—®å¯†ç 

## å¼€å‘è®¡åˆ’

### Phase 1: åŸºç¡€æ¶æ„ï¼ˆMVPï¼‰
- [ ] é¡¹ç›®åˆå§‹åŒ–ï¼ˆNode.js + Reactï¼‰
- [ ] WebSocket + PTY åŸºç¡€ç»ˆç«¯
- [ ] xterm.js å‰ç«¯é›†æˆ
- [ ] åŸºæœ¬çš„ä¼šè¯ç®¡ç†ï¼ˆåˆ›å»º/åˆ—å‡º/é™„åŠ ï¼‰

### Phase 2: å†å²è®°å½•
- [ ] æ•°æ®åº“è®¾è®¡å’Œé›†æˆ
- [ ] è¾“å…¥è¾“å‡ºè®°å½•
- [ ] å†å²è®°å½• API
- [ ] å†å²æŸ¥çœ‹ UI

### Phase 3: AI é›†æˆ
- [ ] Claude API é›†æˆ
- [ ] AI å†³ç­–å¼•æ“
- [ ] ç›®æ ‡é…ç½® UI
- [ ] AI çŠ¶æ€å±•ç¤º

### Phase 4: å®Œå–„åŠŸèƒ½
- [ ] åˆ†äº«åŠŸèƒ½
- [ ] å¯¼å‡ºåŠŸèƒ½
- [ ] ç”¨æˆ·è®¤è¯
- [ ] å¤šç”¨æˆ·æ”¯æŒ

### Phase 5: ç”Ÿäº§åŒ–
- [ ] Docker å®¹å™¨åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç›‘æ§å‘Šè­¦
- [ ] æ–‡æ¡£å®Œå–„
